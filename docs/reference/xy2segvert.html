<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert XY Coordinates to River Locations — xy2segvert • riverdist</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">riverdist</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/riverdist_vignette.html">River Network Distance Computation and Applications with `riverdist`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert XY Coordinates to River Locations</h1>
    </div>

    
    <p>This function determines the closest vertex in the river network
  to each point of XY data and returns a list of river locations, defined 
  as segment numbers and vertex numbers.</p>
    

    <pre class="usage"><span class='fu'>xy2segvert</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>rivers</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A vector of x-coordinates to transform</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>A vector of y-coordinates to transform</p></td>
    </tr>
    <tr>
      <th>rivers</th>
      <td><p>The river network object to use</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame of river locations, with segment numbers in <code>$seg</code>, vertex numbers in <code>$vert</code>, and the snapping distance for each point in <code>$snapdist</code>.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Conversion to river locations is only valid if the input XY 
  coordinates and river network are in the same projected coordinate system. 
  Point data in geographic coordinates can be projected using 
  <a href='http://www.rdocumentation.org/packages/rgdal/topics/project'>project</a> in package 'rgdal', and an example is shown below.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>Gulk</span>,<span class='no'>fakefish</span>)
<span class='fu'>head</span>(<span class='no'>fakefish</span>)</div><div class='output co'>#&gt;          x       y seg vert fish.id flight flight.date
#&gt; 1 885976.9 6951164   1  595       8      1  2015-04-01
#&gt; 2 891727.6 6943194   1  399      10      1  2015-04-01
#&gt; 3 893895.8 6940549   1  352      14      1  2015-04-01
#&gt; 4 893894.9 6929195   1  116       7      1  2015-04-01
#&gt; 5 878936.0 6959825   1  806      11      1  2015-04-01
#&gt; 6 889340.7 6948910   1  505       9      1  2015-04-01</div><div class='input'>
<span class='no'>fakefish.riv</span> <span class='kw'>&lt;-</span> <span class='fu'>xy2segvert</span>(<span class='kw'>x</span><span class='kw'>=</span><span class='no'>fakefish</span>$<span class='no'>x</span>, <span class='kw'>y</span><span class='kw'>=</span><span class='no'>fakefish</span>$<span class='no'>y</span>, <span class='kw'>rivers</span><span class='kw'>=</span><span class='no'>Gulk</span>)
<span class='fu'>head</span>(<span class='no'>fakefish.riv</span>)</div><div class='output co'>#&gt;   seg vert  snapdist
#&gt; 1   1  595 329.34419
#&gt; 2   1  399  40.27721
#&gt; 3   1  352 402.52259
#&gt; 4   1  116 525.06623
#&gt; 5   1  806 355.32753
#&gt; 6   1  505  11.34949</div><div class='input'>
<span class='fu'>plot</span>(<span class='kw'>x</span><span class='kw'>=</span><span class='no'>Gulk</span>, <span class='kw'>xlim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>862000</span>,<span class='fl'>882000</span>), <span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>6978000</span>,<span class='fl'>6993000</span>))</div><div class='input'><span class='fu'>points</span>(<span class='no'>fakefish</span>$<span class='no'>x</span>, <span class='no'>fakefish</span>$<span class='no'>y</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>16</span>, <span class='kw'>col</span><span class='kw'>=</span><span class='fl'>2</span>)</div><div class='input'><span class='fu'><a href='riverpoints.html'>riverpoints</a></span>(<span class='kw'>seg</span><span class='kw'>=</span><span class='no'>fakefish.riv</span>$<span class='no'>seg</span>, <span class='kw'>vert</span><span class='kw'>=</span><span class='no'>fakefish.riv</span>$<span class='no'>vert</span>, <span class='kw'>rivers</span><span class='kw'>=</span><span class='no'>Gulk</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>15</span>, <span class='kw'>col</span><span class='kw'>=</span><span class='fl'>4</span>)</div><div class='img'><img src='xy2segvert-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>

<span class='co'>## converting a matrix of points stored in long-lat to Alaska Albers Equal Area:</span>
<span class='fu'>data</span>(<span class='no'>line98</span>, <span class='no'>Kenai1</span>)
<span class='fu'>head</span>(<span class='no'>line98</span>)  <span class='co'># note that coordinates are stored in long-lat, NOT lat-long</span></div><div class='output co'>#&gt;           [,1]     [,2]
#&gt; [1,] -150.6810 60.60532
#&gt; [2,] -150.6793 60.60723
#&gt; [3,] -150.6792 60.60760
#&gt; [4,] -150.6792 60.60799
#&gt; [5,] -150.6793 60.60838
#&gt; [6,] -150.6794 60.60874</div><div class='input'>
<span class='fu'>library</span>(<span class='no'>rgdal</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: sp</span></div><div class='output co'>#&gt; <span class='message'>rgdal: version: 1.2-8, (SVN revision 663)</span>
#&gt; <span class='message'> Geospatial Data Abstraction Library extensions to R successfully loaded</span>
#&gt; <span class='message'> Loaded GDAL runtime: GDAL 2.2.1, released 2017/06/23</span>
#&gt; <span class='message'> Path to GDAL shared files: /usr/share/gdal/2.2</span>
#&gt; <span class='message'> Loaded PROJ.4 runtime: Rel. 4.9.2, 08 September 2015, [PJ_VERSION: 492]</span>
#&gt; <span class='message'> Path to PROJ.4 shared files: (autodetected)</span>
#&gt; <span class='message'> Linking to sp version: 1.2-5 </span></div><div class='input'><span class='no'>line98albers</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/rgdal/topics/project'>project</a></span>(<span class='no'>line98</span>,<span class='kw'>proj</span><span class='kw'>=</span><span class='st'>"+proj=aea +lat_1=55 +lat_2=65 
    +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs 
    +ellps=GRS80 +towgs84=0,0,0"</span>)
<span class='fu'>head</span>(<span class='no'>line98albers</span>)</div><div class='output co'>#&gt;          [,1]    [,2]
#&gt; [1,] 181039.4 1184516
#&gt; [2,] 181122.8 1184734
#&gt; [3,] 181128.7 1184776
#&gt; [4,] 181126.4 1184820
#&gt; [5,] 181119.3 1184863
#&gt; [6,] 181109.3 1184903</div><div class='input'>
<span class='fu'><a href='zoomtoseg.html'>zoomtoseg</a></span>(<span class='kw'>seg</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>162</span>,<span class='fl'>19</span>), <span class='kw'>rivers</span><span class='kw'>=</span><span class='no'>Kenai1</span>)</div><div class='input'><span class='fu'>points</span>(<span class='no'>line98albers</span>)</div><div class='img'><img src='xy2segvert-2.png' alt='' width='700' height='432.632880098887' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Matt Tyers

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Matt Tyers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
